<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>优化 | 小王的博客</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="logo.png">
    <meta name="description" content="小王的博客">
    
    <link rel="preload" href="/assets/css/0.styles.cc68c345.css" as="style"><link rel="preload" href="/assets/js/app.f3502211.js" as="script"><link rel="preload" href="/assets/js/2.d1a10b95.js" as="script"><link rel="preload" href="/assets/js/21.39165937.js" as="script"><link rel="prefetch" href="/assets/js/10.ac4c7d56.js"><link rel="prefetch" href="/assets/js/11.f3132429.js"><link rel="prefetch" href="/assets/js/12.69ee9b4e.js"><link rel="prefetch" href="/assets/js/13.5d990160.js"><link rel="prefetch" href="/assets/js/14.0388c5dc.js"><link rel="prefetch" href="/assets/js/15.a0bbfeb8.js"><link rel="prefetch" href="/assets/js/16.37a8abd3.js"><link rel="prefetch" href="/assets/js/17.d7f22821.js"><link rel="prefetch" href="/assets/js/18.7cb0543c.js"><link rel="prefetch" href="/assets/js/19.ec78f703.js"><link rel="prefetch" href="/assets/js/20.66bca8a0.js"><link rel="prefetch" href="/assets/js/22.4bb8d9f3.js"><link rel="prefetch" href="/assets/js/23.4d72fd9f.js"><link rel="prefetch" href="/assets/js/24.b11fd65d.js"><link rel="prefetch" href="/assets/js/25.9dc0fc2e.js"><link rel="prefetch" href="/assets/js/26.deeb89ec.js"><link rel="prefetch" href="/assets/js/27.d7347865.js"><link rel="prefetch" href="/assets/js/28.e087f114.js"><link rel="prefetch" href="/assets/js/3.703c0e40.js"><link rel="prefetch" href="/assets/js/4.dcab0898.js"><link rel="prefetch" href="/assets/js/5.9e5cbc4b.js"><link rel="prefetch" href="/assets/js/6.da796272.js"><link rel="prefetch" href="/assets/js/7.740486de.js"><link rel="prefetch" href="/assets/js/8.1a7070ed.js"><link rel="prefetch" href="/assets/js/9.12072ee2.js">
    <link rel="stylesheet" href="/assets/css/0.styles.cc68c345.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">小王的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/index.html" class="nav-link">首页</a></div><div class="nav-item"><a href="/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="博客" class="dropdown-title"><!----> <span class="title" style="display:;">博客</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/jlk-lebron/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/1849806240878344" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://cdn.staticaly.com/gh/jlk-lebron/blog-img@main/PicGo/zms.jpg"> <div class="blogger-info"><h3>Lebron Jia</h3> <span>前端小学生</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/docs/index.html" class="nav-link">首页</a></div><div class="nav-item"><a href="/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="博客" class="dropdown-title"><!----> <span class="title" style="display:;">博客</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/jlk-lebron/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/1849806240878344" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Important</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>前端性能优化</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/d404a8/" aria-current="page" class="active sidebar-link">前端性能优化</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/d404a8/#_1-减少http请求数" class="sidebar-link">（1）减少HTTP请求数</a></li><li class="sidebar-sub-header level2"><a href="/pages/d404a8/#_2-减少dns查询" class="sidebar-link">（2）减少DNS查询</a></li><li class="sidebar-sub-header level2"><a href="/pages/d404a8/#_3-避免重定向" class="sidebar-link">（3）避免重定向</a></li><li class="sidebar-sub-header level2"><a href="/pages/d404a8/#_4-缓存ajax请求" class="sidebar-link">（4）缓存Ajax请求</a></li><li class="sidebar-sub-header level2"><a href="/pages/d404a8/#_5-延迟加载" class="sidebar-link">（5）延迟加载</a></li><li class="sidebar-sub-header level2"><a href="/pages/d404a8/#_6-预加载" class="sidebar-link">（6）预加载</a></li><li class="sidebar-sub-header level2"><a href="/pages/d404a8/#_7-减少dom元素数量" class="sidebar-link">（7）减少DOM元素数量</a></li><li class="sidebar-sub-header level2"><a href="/pages/d404a8/#_8-划分内容到不同域名" class="sidebar-link">（8）划分内容到不同域名</a></li><li class="sidebar-sub-header level2"><a href="/pages/d404a8/#_9-尽量减少iframe的使用" class="sidebar-link">（9）尽量减少iframe的使用</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>小程序</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/categories/?category=%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96" title="分类" data-v-06225672>前端性能优化</a></li></ul> <div class="info" data-v-06225672><!----> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2023-07-11</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">优化<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h1 id="性能优化"><a href="#性能优化" class="header-anchor">#</a> 性能优化</h1> <p>本文主要考虑客户端性能、服务器端和网络性能，内容框架来自<a href="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.yahoo.com%2Fperformance%2Frules.html%3Fguccounter%3D1" target="_blank" rel="noopener noreferrer">Yahoo Developer Network<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，包含 7 个类别共 35 条前端性能优化最佳实践，在此基础上补充了一些相关或者更符合主流技术的内容。</p> <p><img src="https://cdn.staticaly.com/gh/jlk-lebron/blog-img@main/PicGo/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96.webp" alt=""></p> <p>前端性能的一个重要指标是页面加载时间，不仅事关用户体验，也是搜索引擎排名考虑的一个因素。</p> <ul><li>来自Google的数据表明，一个有10条数据0.4秒能加载完的页面，变成30条数据0.9秒加载完之后，流量和广告收入下降90%。</li> <li>Google Map 首页文件大小从100KB减小到70-80KB后，流量在第一周涨了10%，接下来的三周涨了25%。</li> <li>亚马逊的数据表明：加载时间增加100毫秒，销量就下降1%。</li></ul> <p>以上数据更说明「加载时间就是金钱」，前端优化主要围绕提高加载速度进行。</p> <h1 id="一、页面内容"><a href="#一、页面内容" class="header-anchor">#</a> 一、页面内容</h1> <h2 id="_1-减少http请求数"><a href="#_1-减少http请求数" class="header-anchor">#</a> （1）减少HTTP请求数</h2> <p>Web 前端 80% 的响应时间花在图片、样式、脚本等资源下载上。最直接的方式是减少页面所需资源，但并不现实。所以，减少HTTP请求数主要的途径是：</p> <blockquote><p>合并JS/CSS文件。服务器端（CDN）自动合并，基于Node.js的文件合并工具，通过把所有脚本放在一个文件中的方式来减少请求数。</p> <p>使用<strong>CSS</strong> <strong>Sprite</strong>将背景图片合并成一个文件，通过 <code>background-image</code> 和 <code>background-position</code> 控制显示</p> <p><strong>行内图片</strong>（Base64编码）。使用Data URI scheme将图片嵌入HTML或者CSS中；或者将CSS、JS、图片直接嵌入HTML中，会增加文件大小，也可能产生浏览器兼容及其他性能问题。</p></blockquote> <p>减少页面的HTTP请求数是个起点，这是提升站点首次访问速度的重要指导原则。</p> <h2 id="_2-减少dns查询"><a href="#_2-减少dns查询" class="header-anchor">#</a> （2）减少DNS查询</h2> <p>用户输入URL以后，浏览器首先要查询域名（hostname）对应服务器的IP地址，一般需要耗费20-120毫秒时间。DNS查询完成之前，浏览器无法从服务器下载任何数据。</p> <p>基于性能考虑，ISP、局域网、操作系统、浏览器都会有相应的DNS缓存机制。</p> <ul><li>IE缓存30分钟，可以通过注册表中DnsCacheTimeout项设置；</li> <li>Firefox缓存1分钟，通过network.dnsCacheExpiration配置；</li></ul> <p>另外减少不同的主机名可减少DNS查找，减少不同主机名的数量同时也减少了页面能够并行下载的组件数量，避免DNS查找削减了响应时间，而减少并行下载数量却增加了响应时间。原则是把组件分散在2到4个主机名下，这是同时减少DNS查找和允许高并发下载的折中方案。</p> <h2 id="_3-避免重定向"><a href="#_3-避免重定向" class="header-anchor">#</a> （3）避免重定向</h2> <p>HTTP重定向通过 <code>301/302</code>状态码实现。下面是一个有301状态码的HTTP头</p> <div class="language-Apache extra-class"><pre class="language-text"><code>apache
复制代码
 HTTP/1.1 301 Moved Permanently  Location: http://example.com/newuri Content-Type: text/html
</code></pre></div><p>浏览器会自动跳转到Location域指明的URL。重定向需要的所有信息都在HTTP头部，而响应体一般是空的。其实额外的HTTP头，比如Expires和Cache-Control也表示重定向。除此之外还有别的跳转方式：refresh元标签和JavaScript，但如果你必须得做重定向，最好用标准的3xxHTTP状态码，主要是为了让返回按钮能正常使用。</p> <p>客户端收到服务器的重定向响应后，会根据响应头中Location的地址再次发送请求。重定向会影响用户体验，尤其是多次重定向时，用户在一段时间内看不到任何内容，只看到浏览器进度条一直在刷新。</p> <ul><li>最浪费的重定向经常发生、而且很容易被忽略：URL 末尾应该添加 <code>/</code>但未添加。比如，访问 <code>http://astrology.yahoo.com/astrology</code>将被 <code>301</code>重定向到 <code>http://astrology.yahoo.com/astrology/</code>（注意末尾的 /）。如果使用 Apache，可以通过Alias或mod_rewrite或DirectorySlash解决这个问题。</li> <li>网站域名变更：CNAME结合Alias或mod_rewrite或者其他服务器类似功能实现跳转。</li></ul> <h2 id="_4-缓存ajax请求"><a href="#_4-缓存ajax请求" class="header-anchor">#</a> （4）缓存Ajax请求</h2> <p>最重要的的优化方式是缓存响应结果。有尚未过期的Expires或者Cache-Control HTTP头，那么之前的资源就可以从缓存中读出。必须通知浏览器，应该继续使用之前缓存的资源响应，还是去请求一个新的。可以通过给资源的Ajax URL里添加一个表明用户资源最后修改时间的时间戳来实现。如果资源从上一次下载之后再没有被修改过，时间戳不变，资源就将从浏览器缓存中直接读出，从而避免一次额外的HTTP往返消耗。详见 <code>服务器-添加Expires或Cache响应头</code>。</p> <h2 id="_5-延迟加载"><a href="#_5-延迟加载" class="header-anchor">#</a> （5）延迟加载</h2> <p>页面初始加载时哪些内容是绝对必需的？不在答案之列的资源都可以延迟加载。比如：</p> <ul><li>非首屏使用的数据、样式、脚本、图片等；</li> <li>用户交互时才会显示的内容。</li></ul> <p>遵循「渐进增强」理念开发的网站：JavaScript用于增强用用户体验，但没有（不支持） JavaScript也能正常工作，完全可以延迟加载JavaScript。</p> <blockquote><p>将首屏以外的HTML放在不渲染的元素中，如隐藏的 <code>&lt;textarea&gt;</code>，或者type属性为非执行脚本的 <code>&lt;script&gt;</code>标签中，减少初始渲染的DOM元素数量，提高速度。等首屏加载完成或者用户操作时，再去渲染剩余的页面内容。</p></blockquote> <h2 id="_6-预加载"><a href="#_6-预加载" class="header-anchor">#</a> （6）预加载</h2> <p>预先加载利用浏览器空闲时间请求将来要使用的资源，以便用户访问下一页面时更快地响应。</p> <ul><li>无条件预先加载：页面加载完成（load）后，马上获取其他资源。以 <a href="https://link.juejin.cn/?target=http%3A%2F%2Fgoogle.com" target="_blank" rel="noopener noreferrer">google.com<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 为例，首页加载完成后会立即下载一个 Sprite 图片，此图首页不需要，但是搜索结果页要用到。</li> <li>有条件预先加载：根据用户行为预判用户去向，预载相关资源。比如search.yahoo.com开始输入时会有额外的资源加载。Chrome 等浏览器的地址栏也有类似的机制。</li> <li>有「阴谋」的预先加载：页面即将上线新版前预先加载新版内容。网站改版后由于缓存、使用习惯等原因，会有旧版的网站更快更流畅的反馈。为缓解这一问题，在新版上线之前，旧版可以利用空闲提前加载一些新版的资源缓存到客户端，以便新版正式上线后更快的载入。</li></ul> <h2 id="_7-减少dom元素数量"><a href="#_7-减少dom元素数量" class="header-anchor">#</a> （7）减少DOM元素数量</h2> <p>复杂的页面不仅下载的字节更多，JavaScript DOM操作也更慢。例如，同是添加一个事件处理器，500个元素和5000个元素的页面速度上会有很大区别。</p> <p>从以下几个角度考虑移除不必要的标记：</p> <ul><li>是否还在使用表格布局？</li> <li>塞进去更多的 <code>&lt;div&gt;</code>仅为了处理布局问题？也许有更好、更语义化的标记。</li> <li>能通过伪元素实现的功能，就没必要添加额外元素，如清除浮动。</li></ul> <p>浏览器控制台中输入以下代码可以计算出页面中有多少 DOM 元素：</p> <blockquote><p>document.getElementsByTagName('*').length;</p></blockquote> <p>为什么不使用表格布局？</p> <ul><li>更多的标签，增加文件大小；</li> <li>不易维护，无法适应响应式设计；</li> <li>性能考量，默认的表格布局算法会产生大量重绘</li></ul> <h2 id="_8-划分内容到不同域名"><a href="#_8-划分内容到不同域名" class="header-anchor">#</a> （8）划分内容到不同域名</h2> <p>浏览器一般会限制每个域的并行线程（一般为6个，甚至更少），使用不同的域名可以最大化下载线程，但注意保持在2-4个域名内，以避免DNS查询损耗。</p> <p>例如，动态内容放在 <code>csspod.com</code>上，静态资源放在 <code>static.csspod.com</code>上。这样还可以禁用静态资源域下的Cookie，减少数据传输，详见 <code>Cookie 优化</code>。</p> <h2 id="_9-尽量减少iframe的使用"><a href="#_9-尽量减少iframe的使用" class="header-anchor">#</a> （9）尽量减少iframe的使用</h2> <p>用iframe可以把一个HTML文档插入到父文档里，重要的是明白iframe是如何工作的并高效地使用它。</p> <iframe>的优点：
</iframe></div></div> <!----> <div class="page-edit"><!----> <!----> <!----></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/99e2b6/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Vue</div></a> <a href="/pages/6ff6a7/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">小程序数据绑定</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/99e2b6/" class="prev">Vue</a></span> <span class="next"><a href="/pages/6ff6a7/">小程序数据绑定</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/6ff6a7/"><div>
            小程序数据绑定
            <!----></div></a> <span class="date">07-25</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/ae59fa/"><div>
            小程序事件绑定
            <!----></div></a> <span class="date">07-25</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/88b0d3/"><div>
            小程序路由跳转
            <!----></div></a> <span class="date">07-25</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:16631085276@163.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/jlk-lebron" title="GitHub" target="_blank" class="iconfont icon-github"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2022-2023
    <span>Lebron Jia  | <a href="https://github.com/xugaoyi/vuepress-theme-vdoing/blob/master/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.f3502211.js" defer></script><script src="/assets/js/2.d1a10b95.js" defer></script><script src="/assets/js/21.39165937.js" defer></script>
  </body>
</html>
